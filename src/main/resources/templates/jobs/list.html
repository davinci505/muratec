<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/base :: layout(~{::title}, ~{::.content}, ~{}, ~{})}"
      th:with="activePage='jobs'">
<head>
    <title>작번 의뢰 관리 - MURATEC</title>
</head>
<body>
    <div class="content">
        <h1 class="mb-4">작번 의뢰 관리</h1>

        <div class="mb-3 d-flex gap-2">
            <a href="/jobs/new" class="btn btn-primary">새 의뢰 추가</a>
            <a href="/jobs/bulk" class="btn btn-success">📊 대량 등록</a>
        </div>

        <div th:if="${jobs.isEmpty()}" class="alert alert-info">
            등록된 의뢰가 없습니다.
        </div>

        <div th:if="${!jobs.isEmpty()}" class="table-responsive">
            <table class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>
                        <th class="col-medium">작번</th>
                        <th class="col-medium">의뢰인</th>
                        <th class="col-medium">의뢰날짜</th>
                        <th class="col-medium">고객명</th>
                        <th class="col-medium">공장명</th>
                        <th class="col-medium">제품명</th>
                        <th class="col-medium">제품스펙</th>
                        <th class="col-medium">품번</th>
                        <th class="col-short">관리</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="job : ${jobs}">
                        <td th:text="${job.jobNo}"></td>
                        <td>
                            <a th:href="@{/quotes(jobId=${job.id})}" th:text="${job.requester}"></a>
                        </td>
                        <td th:text="${job.requestDate}"></td>
                        <td th:text="${job.customerName}"></td>
                        <td th:text="${job.factoryName}"></td>
                        <td th:text="${job.productName}"></td>
                        <td th:text="${job.productSpec}"></td>
                        <td th:text="${job.partNo}"></td>
                        <td>
                            <div class="d-flex gap-1">
                                <a th:href="@{/jobs/edit/{id}(id=${job.id})}" class="btn btn-sm btn-outline-primary">수정</a>
                                <a th:href="@{/jobs/delete/{id}(id=${job.id})}" class="btn btn-sm btn-outline-danger" onclick="return confirm('삭제하시겠습니까?');">삭제</a>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>
